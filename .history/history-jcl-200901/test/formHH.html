<!-- saved from url=(0022)http://internet.e-mail -->
<html>
<head>
<link href="../themes\default/skin.css" rel="stylesheet" type="text/css" />
<link href="../themes\default/system.css" rel="stylesheet" type="text/css" />

<script language = 'javascript' >
	var _theme_root = "../themes/default";
	var __SKIN_PATH = "../themes/default";
</script>
<script language ='javascript' src = '../js/spw/lang.txt' >
</script>
<script language ='javascript' src = '../js/sw2/component.txt' >
</script>
<script language ='javascript' src = '../js/sw2/browser.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/control.txt'>
</script>

<script language ='javascript' src = '../js/sw2/view/dragdrop.txt'>
</script>



<script language ='javascript' src = '../js/sw2/view/context.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/desktop.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/button.txt' >
</script>
<script language ='javascript' src = '../js/sw2/view/checkbox.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/form.txt' >
</script>
<script language ='javascript' src = '../js/sw2/view/ProgressBar.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/groupbox.txt' >
</script>
<script language ='javascript' src = '../js/sw2/view/splitter.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/tree.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/label.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/scrollbar.txt' >
</script>

<script language ='javascript' src = '../js/sw2/view/menubar.txt' >
</script>
<script language ='javascript' src = '../js/sw2/view/panel.txt' >
</script>
<script language ='javascript' src = '../js/sw2/view/grid-newhh.txt' >
</script>

<script language = "javascript">
var form = null;
var button = null;
function test1() {
//	try {
	form = new sw2.view.Form();
//	form.bviewld();
//	form.setValue("test");
/*	form._hel.style.position = "absolute";
	form._hel.style.left = "200pt";
	form._hel.style.visibility = "visible";
	form._hel.style.width = "200pt";
	form._hel.style.top = "200pt";
	form._hel.style.height = "200pt";*/

	form.setParent(desk);
	form.setBounds(1,1,700,350);
//	} catch(e) {
//		alert(e.message);
//	}

};
function test2() {
//	document.forms[0].a1.style.position = "absolute";
//	document.forms[0].a1.style.left = "200pt";
//	document.forms[0].a2.style.position = "absolute";
//	document.forms[0].a2.style.left = "600pt";
	//form.setAllowPushDown(true);
//	form._el.focus();
//	form.setDraggable(!form.getDraggable());
	form.setCaption("form12");

	button = new sw2.view.Button();
//	button.bviewld();
	button.setCaption("test");
/*	button._hel.style.position = "absolute";
	button._hel.style.left = "200pt";
	button._hel.style.visibility = "visible";
	button._hel.style.width = "200pt";
	button._hel.style.top = "200pt";
	button._hel.style.height = "200pt";*/

	button.setBounds(30,30,80,60);
	button.setParent(form);
};

function test3() {
/*
	for (var i = 0;i<30;i++) {
		document.title = i;
		menubar.showSubMenu(menubar._elButtons[0],menu._children[0],menu._children[0].getSubMenu());
		menubar.showSubMenu(menubar._elButtons[1],menu._children[1],menu._children[1].getSubMenu());
		menubar.showSubMenu(menubar._elButtons[0],menu._children[0],menu._children[0].getSubMenu());
	}
*/
	for (var i = 0;i<1000;i++) {
		document.title = i;
		form = new sw2.view.Form();
		$H.addControl(form);
		form.setBounds(100,300,400,300);
		button = new sw2.view.Button();
		button.setValue("test");
	
		button.setBounds(30,30,80,60);
		button.setParent(form);

		
		$H.removeControl(form);
		form.dispose();

		form = new sw2.view.Form();
		$H.addControl(form);
		form.setBounds(100,300,400,300);
		button = new sw2.view.Button();
		button.setValue("test");
	
		button.setBounds(30,30,80,60);
		button.setParent(form);

	}

};

function test4() {
//	document.body.removeChild(form._el);
	addMenu();
	var popup = new sw2.view.PopupMenu();
	$H.addControl(popup);
	popup.setMenu(submenu);
	for (var i = 0;i<1000;i++) {
		menuCreated = false;
		addMenu();
		document.title = i;
//		$H.removeControl(popup);
//		popup.dispose();

		popup = new sw2.view.PopupMenu();
		$H.addControl(popup);
		popup.setMenu(submenu);
	}
	//	alert(form._el.style.zIndex+","+form._elTable.style.zIndex+",");

};
var b1;
var b2;
var b3;
var b4;
var b5;

function loaded() {
	b1 = document.getElementById('b1');
	b2 = document.getElementById('b2');
	b3 = document.getElementById('b3');
	b4 = document.getElementById('b4');
	b5 = document.getElementById('b5');
}

function test5() {
//	alert($H._elDesktop.style.zIndex);
//	alert(button._el.currentStyle.visibility);
//	var b = $HTML.createElement("form");
//	$HTML.addElement(b);
//	alert($C._captured);
//	alert(document.body.offsetLeft + "," + document.body.clientWidth+","+ document.body.offsetWidth+"," + document.body.clientHeight+","+ document.body.offsetHeight);
//	alert($H._elDesktop.clientWidth+","+ $H._elDesktop.offsetWidth+"," + $H._elDesktop.clientHeight+","+ $H._elDesktop.offsetHeight);
//	eval("try { "+ document.getElementById('ta').value+";} catch(e){alert(e.message);}");


	eval(document.getElementById('ta').value+";");
}	

var checkBox;
function addCheckBox() {

	checkBox = new sw2.view.CheckBox();
	checkBox.setParent(form);
}

var progressBar;
function addProgessBar() {

	progressBar = new sw2.view.ProgressBar();
	progressBar.setParent(form);
	progressBar.setBounds(30,30,80,20);
}

var groupbox;
function addGroupBox() {

	groupbox = new sw2.view.GroupBox();
	groupbox.setParent(form);
	groupbox.setBounds(30,30,80,20);

}

var splitter;

function addSplitter() {

	splitter = new sw2.view.Splitter();
	splitter.setParent(form);
	splitter.setBounds(30,30,80,20);

}

var tree;

function addTree() {

	tree = new sw2.view.Tree();
	tree.setParent(form);
	tree.setBounds(30,30,80,220);

};


var scrollbar;
function addScrollbar() {
	scrollbar = new sw2.view.CustomScrollBar();
	scrollbar.setParent(form);
	scrollbar.setLeft(50);
	scrollbar.setTop(100);
	scrollbar.setWidth(300);
}

var label ;

function addLabel() {
	label = new sw2.view.Label();
	label.setParent(form);
	label.setBounds(30,30,80,20);
	label.setCaption("label1");
}


var menu,menubar,submenu;
var menuCreated = false;
function addMenu() {
	if (menuCreated) return;
	var item = new sw2.view.MenuItem();
	item.setCaption("test");
	item.setIcon(__SKIN_PATH+"/groupbox_collapse.gif");
	
	submenu = new sw2.view.Menu();

	var item2 = new sw2.view.MenuItem();
	item2.setCaption("test11");
	item2.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item2);
	var item3 = new sw2.view.MenuItem();
	item3.setCaption("test12");
	item3.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item3);

	item.setSubMenu(submenu);

	submenu = item3.getSubMenu();

	var item31 = new sw2.view.MenuItem();
	item31.setCaption("test11");
	item31.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item31);
	var item32 = new sw2.view.MenuItem();
	item32.setCaption("test12");
	item32.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item32);


	var item1 = new sw2.view.MenuItem();
	item1.setCaption("test2");
	item1.setIcon(__SKIN_PATH+"/field_required.gif");

	submenu = new sw2.view.Menu();
	var item21 = new sw2.view.MenuItem();
	item21.setCaption("test21");
	item21.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item21);
	var item22 = new sw2.view.MenuItem();
	item22.setCaption("test12");
	item22.setIcon(__SKIN_PATH+"/datatable_order_descent.gif");
	submenu.addItem(item22);
	item1.setSubMenu(submenu);

	menu  = new sw2.view.Menu();
	menu.addItem(item);
	menu.addItem(item1);


	menuCreated = true;
}
function addMenuBar() {
	addMenu();
	menubar = new sw2.view.MenuBar();
	menubar.setMenu(menu);
//	menu.setParent(form);
	menubar.setParent(form);
	menubar.setBounds(30,30,200,26);
	menubar.setAlign(V.Align.top);
}

var panel;
function addPanel() {
	panel = new sw2.view.Panel();
	panel.setBounds(30,30,200,26);
	panel.setParent(form);
}

// write by HH
var grid;
function addGrid() {
	grid = new sw2.view.CustomGrid();
	grid.setBounds(30,30,530,230);
	grid.setParent(form);
}

function addGrid1() {
	grid = new sw2.view.CustomGrid();
	
	grid.setColName(["No","HidSerial","serial","usercode","fullname","qty","chk","checkbox"]);
    grid.setColTitle(["No.","隐藏列","条形码","编号","全名","数量","单价",""]);
    grid.setColType([0,4,3,3,3,3,3,5]);
    grid.setColNumType([0,0,0,0,0,2,2,0]);
    grid.setColWidth([16,5,100,100,100,100,100,16])
    grid.setColAlign([0,1,2,0,1,2,2,1])
    grid.setColView([1,0,1,1,1,1,1,1]);
    grid.setColReadType([0,1,0,0,0,0,0,1]);
    grid.init();
	
	grid.setBounds(30,30,530,230);
	grid.setParent(form);
}
//-------------------------------------------------

function addButtonClickEvent() {
function a(evt) {
   alert(evt.getType());
};
button.addEventListener("Click",a,null)
}


function addDragDropEvent() {
	var deltaX = 0;
	var deltaY = 0;
	function btnMouseDown(evt) {
		var btn = evt.getSender();
		var x = evt.getX();
		var y = evt.getY();
		var pos = btn.getDesktopPos();
		deltaX = x-pos[0];
		deltaY = y-pos[1];
		btn.beginDrag();
	};

	function panelDragEnter(evt) {
		var panel = evt.getSender();
		var btn = evt.getSrc();
		evt.setAccept(true);
	};

	function panelDragDrop(evt) {
		var panel = evt.getSender();
		var btn = evt.getSrc();
		var x = evt.getX();
		var y = evt.getY();
		var deskPos = panel.getDesktopPos();
		btn.setParent(panel);
		btn.setLeft(x-deskPos[0]-deltaX);
		btn.setTop(y-deskPos[1]-deltaY);
	};

	button.addEventListener("MouseDown",btnMouseDown,null);
	panel.addEventListener("DragEnter",panelDragEnter,null);
	panel.addEventListener("DragDrop",panelDragDrop,null);
}
</script>
</head>



<body onload ="V.Control.initDesktop();">
<form>
<div  style = "position:absolute;left:10;top:10;width:1000;height:180;overflow:hidden;border-width:2;border-style:ridge">
<table width = "100%" height = "100%">
<tr height = "30%">
<td>
<input type = button id = 'b1' name ='a1' value = 'Add Form' onclick = "test1();" />
<input type = button id = 'b2' name ='a2' value = 'Add Button' onclick = "test2();" />
<input type = button id = 'b3' name ='a2' value = 'AddButtonClickEvent' onclick = "addButtonClickEvent();" />
<input type = button id = 'b4' name ='a2' value = 'AddDragDropEvent' onclick = "addDragDropEvent();" />
<input type = button id = 'b5' name ='a2' value = 'Add CheckBox' onclick = "addCheckBox();" />
<input type = button id = 'b5' name ='a2' value = 'Add ProgessBar' onclick = "addProgessBar();" />
<input type = button id = 'b5' name ='a2' value = 'Add GroupBox' onclick = "addGroupBox();" />
<input type = button id = 'b5' name ='a2' value = 'Add Splitter' onclick = "addSplitter();" />
<input type = button id = 'b5' name ='a2' value = 'Add Tree' onclick = "addTree();" />
<input type = button id = 'b5' name ='a2' value = 'Add Scrollbar' onclick = "addScrollbar();" />
<input type = button id = 'b5' name ='a2' value = 'Add Label' onclick = "addLabel();" />
<input type = button id = 'b5' name ='a2' value = 'Add Menu' onclick = "addMenuBar();" />
<input type = button id = 'b5' name ='a2' value = 'Add Panel' onclick = "addPanel();" />
<input type = button id = 'b5' name ='a2' value = 'Add Grid' onclick = "addGrid();" />
<input type = button id = 'b5' name ='a2' value = 'Add Grid1' onclick = "addGrid1();" />
<input type = checkbox id = 'c5' />


<br>
<br>
<textarea id="ta" rows="6" cols="100"></textarea>
<input type = button id = 'C5'name ='s' value = 's' onclick = "test5();" />
</td>
</tr>
<tr height = "400">
<td>
</td>
</tr>
</table>
</div>
<div id = "sw2Container" style = "position:absolute;left:10;top:190;width:1000;height:400;overflow:hidden;border-width:2;border-style:ridge"
</div>
</form>
</body>
</html>